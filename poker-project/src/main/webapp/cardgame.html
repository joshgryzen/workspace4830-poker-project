<html>
<head>
<style>

body {
    margin: 0;
    background-color: rgb(255, 255, 255);
    margin: 0;
    height: 100vh; /* Ensure body takes up full viewport height */
    display: flex;
    justify-content: center;
    align-items: flex-end; /* Align items to the bottom */
}

.card_table {
    position: absolute;
    display: block;
    box-sizing: border-box;
    top: 30px;
    left: 20px;

    width: calc(100% - 40px);
    height: calc(100vh - 60px);
    max-height: 100%;
    max-width: 100%;
   
    background: rgb(8,128,6);
    background: radial-gradient(circle, rgba(8,128,6,1) 0%, rgba(38,52,38,1) 100%);
    border: 25px solid #B87333;
    border-radius: 10000px;
    outline: 15px solid black;
    box-shadow: 0 0 100px black;
}

section {
    position: absolute;
    width: auto;
    padding:50px;
    display: flex;
    text-align: center;
    justify-content: center;
    align-items: center;
    	 	 
}

label {
    color: white;

}

input[type="submit"] {
    margin-top: -10px; /* Add some space above the submit button */

}

.rectangle-container {
    position: relative;
}
.home-button {
    margin-top: -10px;
    margin-right: 10px;
}


      /* Style for clickable rectangles */
.rectangleHand {
            width: 63px;
            height: 86px;
            background-color: rgba(255, 255, 255, 0.5); /* Adjust opacity as needed */
            margin: 10px; /* Add some margin between rectangles */
            cursor: pointer; /* Change cursor to pointer on hover */
            display: inline-block; /* Display rectangles inline */
}
      /* Style for clickable rectangles */
.rectangleFlop {
            width: 63px;
            height: 86px;
            background-color: rgba(255, 255, 255, 0.5); /* Adjust opacity as needed */
            margin: 10px; /* Add some margin between rectangles */
            cursor: pointer; /* Change cursor to pointer on hover */
            display: inline-block; /* Display rectangles inline */
}
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 500;
    top: 150;
    width: 980; /* Full width */
    height: 430; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */

}

/* Modal content */
.modal-content {
    position: fixed; /* Stay in place */
    left: 500;
    top: 150;
    width: 940; /* Full width */
    height: 390; /* Full height */
    padding: 20px;
    border: 1px solid #888;

}

/* Close button */
.close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}

/* Style for card images */
.card-image {
    width: 63px; /* Adjust image size as needed */
    height: 86; /* Maintain aspect ratio */
    margin: 3px; /* Add some margin between card images */
    box-sizing: border-box; /* Include border in dimensions */
    border: 2px solid transparent; /* Initially transparent border */
}


</style>
</head>
<body>

<div class="card_table" id=card_table>
</div>
<section>
    <form action="insertPlayerHand" method="POST">
        <div class="rectangle-container">
            <!-- Clickable rectangles -->
            <div class="rectangleFlop" onclick="handleRectangleClick(3)"></div>
            <div class="rectangleFlop" onclick="handleRectangleClick(4)"></div>
            <div class="rectangleFlop" onclick="handleRectangleClick(5)"></div>
            <div class="rectangleFlop" onclick="handleRectangleClick(6)"></div>
            <div class="rectangleFlop" onclick="handleRectangleClick(7)"></div>
        </div>
        <!-- New rectangles added above the current ones -->
        <div class="rectangle-container">
            <div class="rectangleHand" onclick="handleRectangleClick(1)"></div>
            <div class="rectangleHand" onclick="handleRectangleClick(2)"></div>
        </div>
        <input type="button" class="home-button" value="Home" onclick="window.location.href='home.html';">      
        <input type="submit" value="Submit"/>
    </form>
</section>
<!-- Modal dialogue box -->
<div id="myModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div id="modalContent"></div>
    </div>
</div>
<script>
    // Get the modal
    var modal = document.getElementById("myModal");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // Define a variable to track selected cards
    var selectedCards = [];



    function updateCardRectangles() {
        var rectangles = document.querySelectorAll(".rectangleFlop");
        selectedCards.forEach(function(cardSrc, index) {
            if (index < 5) {
                rectangles[index].style.backgroundImage = "url('" + cardSrc + "')";
                rectangles[index].style.backgroundSize = "cover";
                rectangles[index].style.backgroundPosition = "center";
            }
        });
    }


    function toggleCardSelection(cardImage) {
        var selectedIndex = selectedCards.indexOf(cardImage.src);
        if (selectedIndex !== -1) {
            selectedCards.splice(selectedIndex, 1);
            cardImage.style.border = ""; // Reset border
        } else {
            if (selectedCards.length < 5) { // Limit selection to 5 cards
                selectedCards.push(cardImage.src);
                cardImage.style.border = "2px solid yellow"; // Set border to yellow
            }
        }
        
        // Update rectangles to match selected cards
        updateCardRectangles();
    }




    // Function to update card appearance based on selection and update rectangles
    function updateCardAppearance() {
        var cardImages = document.querySelectorAll(".card-image");
        cardImages.forEach(function(cardImage) {
            var cardSrc = cardImage.src;
            var isSelected = selectedCards.includes(cardSrc);
            if (isSelected) {
                cardImage.style.opacity = "0.5"; // Set opacity to grey for selected cards
            } else {
                cardImage.style.opacity = ""; // Reset opacity for unselected cards
            }

            // Update corresponding rectangle for selected cards
            var rectangles = document.querySelectorAll(".rectangleFlop");
            rectangles.forEach(function(rectangle, index) {
                if (selectedCards[index] === cardSrc) {
                    rectangle.style.backgroundColor = "yellow"; // Highlight corresponding rectangle
                } else {
                    rectangle.style.backgroundColor = ""; // Reset color for other rectangles
                }
            });
        });
    }



    // Function to populate modal with card images
    function populateModalWithCardImages(rectangleClicked) {
        var modalContent = document.getElementById("modalContent");
        var suits = ['c', 'd', 's', 'h']; // Array of suits

        // Clear modal content before populating
        modalContent.innerHTML = "";

        // Loop through each suit
        suits.forEach(function(suit) {
            // Create a div for each suit
            var suitDiv = document.createElement("div");
            suitDiv.className = "suit-container";

            // Loop through card values (2-14) for the current suit
            for (var i = 2; i <= 14; i++) {
                // Create image element for the current card
                var cardImage = document.createElement("img");
                cardImage.src = "Cards/" + i + suit + ".png";
                cardImage.className = "card-image"; // Add class for styling

                // Add event listener for card selection
                cardImage.addEventListener("click", function() {
                    toggleCardSelection(this);
                });

                // Append the card image to the suit div
                suitDiv.appendChild(cardImage);
            }

            // Append the suit div to the modal content
            modalContent.appendChild(suitDiv);
        });

        // Update card appearance based on selection
        if (rectangleClicked >= 3 && rectangleClicked <= 7) {
            updateCardAppearance();
        }
    }


    // Function to handle rectangle clicks
    function handleRectangleClick(rectangleNumber) {
        console.log("Rectangle " + rectangleNumber + " clicked!");
        modal.style.display = "block";

        // Populate modal with card images
        populateModalWithCardImages();
    }


    
    // When the user clicks on <span> (x) or outside of the modal, close it
    span.onclick = function() {
        modal.style.display = "none";
        // Clear selected cards array when modal is closed
        selectedCards = [];
    }

    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
            // Clear selected cards array when modal is closed
            selectedCards = [];
        }
    }
</script>
</body>
</html>
